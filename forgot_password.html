<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Forgot Password</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="css/forgot.css">
  <script>
    function fetchQuestion() {
      const aadhar = document.getElementById("aadhar").value;
      const questionChoice = document.querySelector('input[name="question_choice"]:checked');

      if (!aadhar || !questionChoice) {
        document.getElementById("question_display").innerText = "Please enter Aadhar and select a question.";
        return;
      }

      const xhr = new XMLHttpRequest();
      xhr.open("POST", "get_question.php", true);
      xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
      xhr.onload = function () {
        document.getElementById("question_display").innerText = xhr.responseText;
      };
      xhr.send(`aadhar=${aadhar}&question_choice=${questionChoice.value}`);
    }
  </script>
</head>
<body>
  <div class="container">
    <h2><i class="fas fa-lock"></i> Forgot Password</h2>
    <form action="verify_question.php" method="POST">
      <label for="aadhar">Enter Aadhar Number:</label>
      <input type="text" id="aadhar" name="aadhar"maxlength="12"placeholder="Enter Your Aadhar" required>

      <label>Select Security Question:</label>
      <div class="radio-group">
        <input type="radio" name="question_choice" value="1" onclick="fetchQuestion()"> Security Question 1<br>
        <input type="radio" name="question_choice" value="2" onclick="fetchQuestion()"> Security Question 2
      </div>

      <p id="question_display"></p>

      <label>Answer:</label>
      <input type="text" name="answer"placeholder=" Enter Your Answer" required>

      <button type="submit"><i class="fas fa-key"></i> Submit</button>
      <a href="login.html"><i class="fa-solid fa-user-plus"></i> Remember Your Password</a>
    </form>
  </div>
</body>
</html>
